<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>BAIUST Events</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <div class="container">
      <h1>BAIUST Events</h1>
      <nav>
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="events.html">Events</a></li>
          <li><a href="admin.html">Admin</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main>
    <section class="events-list">
      <div class="container">
        <h2>ðŸ“… All Events</h2>
        <div id="event-list">Loading events...</div>
      </div>
    </section>
  </main>

  <script>
    async function loadEvents() {
      try {
        const res = await fetch('http://localhost:5000/events');
        if (!res.ok) throw new Error('Failed to fetch events');
        const events = await res.json();

        const list = document.getElementById('event-list');
        if (events.length === 0) {
          list.innerHTML = '<p>No events available.</p>';
          return;
        }
        list.innerHTML = '';

        events.forEach(e => {
          const div = document.createElement('div');
          div.className = 'event-card';
          div.innerHTML = `
            <h3>${e.EventName}</h3>
            <p><strong>Date:</strong> ${new Date(e.EventDate).toLocaleDateString()}</p>
            <p><strong>Location:</strong> ${e.Location}</p>
            <p><strong>Coordinator:</strong> ${e.CoordinatorName || 'N/A'}</p>
            <a href="register.html?id=${e.EventID}" class="register-button">Register Now</a>
          `;
          list.appendChild(div);
        });
      } catch (err) {
        console.error(err);
        document.getElementById('event-list').innerHTML = '<p>Error loading events.</p>';
      }
    }
    loadEvents();
  </script>
</body>
</html>
